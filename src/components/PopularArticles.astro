---
import fetchArticles from "../lib/fetchArticles";

const { class: className } = Astro.props;
const articles = await fetchArticles({count: 3});
---

<h2 class="visually-hidden">Popular Articles</h2>
<ul role="list" class:list={className}>
{ articles.map((article) => (
    <li>
    <article class="">
      <img src={article.data.image} alt="" />
      <div>
        <h3><a href={`/article/${article.data.slug}`}>{article.data.title}</a></h3>
        <p>{article.data.content}</p>
      </div>
    </article>
  </li>

))
  }
  <!-- <li>
    <article>
      <img src="/images/image-top-laptops.jpg" alt="" />
      <div>
        <h3><a href="#">Top 10 Laptops of 2022</a></h3>
        <p>Our best picks for various needs and budgets.</p>
      </div>
    </article>
  </li>
  <li>
    <article>
      <img src="/images/image-gaming-growth.jpg" alt="" />
      <div>
        <h3><a href="#">The Growth of Gaming</a></h3>
        <p>How the pandemic has sparked fresh opportunities.</p>
      </div>
    </article>
  </li> -->
</ul>

<style>
  article {
    display: grid;
    gap: 1rem;
    grid-template-columns: 100px auto;

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    > div {
      display: grid;
      gap: 0.5rem;

      &::before {
        content: counter(article-count, decimal-leading-zero);
        display: block;
        font-weight: var(--fw-semi-bold);
        font-size: var(--fs-600);
        color: var(--clr-accent);
        line-height: 1;
      }
    }
  }

  ul {
    counter-reset: article-count;
    padding: 0;
  }

  li {
    counter-increment: article-count;
  }
</style>
